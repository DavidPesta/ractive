{"version":3,"file":"polyfills.min.js","sources":["../src/polyfills.js"],"sourcesContent":["// NOTE: The following polyfills are constructed based on several reference\n// materials which include the original legacy.js definitions, polyfills found\n// in MDN (which roughly followed the ES6 spec), and open-source libs\n// (es5-shim). All of which were rewritten to be compliant to the linter, and\n// where readability and flow can be improved.\n//\n// TODO: Better presence checks (i.e. typeof thing === 'function')\n// TODO: Better global attachments (i.e. Promise, requestAnimationFrame, etc.)\n// TODO: Add references to relevant specs and sources\n// TODO: Tests and coverage\n// TODO: Optimizations\n\n// Array.isArray\nif (!Array.isArray) {\n\tArray.isArray = function (arg) {\n\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t};\n}\n\n// Array.prototype.every\nif (!Array.prototype.every) {\n\tArray.prototype.every = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.every called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tif (!callback.call(thisArg, array[index], index, array)) return false;\n\t\t}\n\n\t\treturn true;\n\t};\n}\n\n// Array.prototype.filter\nif (!Array.prototype.filter) {\n\tArray.prototype.filter = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.filter called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\t\tconst results = [];\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tif (!callback.call(thisArg, array[index], index, array)) continue;\n\t\t\tresults.push(array[index]);\n\t\t}\n\n\t\treturn results;\n\t};\n}\n\n// Array.prototype.find\nif (!Array.prototype.find) {\n\tArray.prototype.find = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.find called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tif (!callback.call(thisArg, array[index], index, array)) continue;\n\t\t\treturn array[index];\n\t\t}\n\n\t\treturn undefined;\n\t};\n}\n\n// Array.prototype.forEach\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.forEach called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tcallback.call(thisArg, array[index], index, array);\n\t\t}\n\n\t\treturn undefined;\n\t};\n}\n\n// Array.prototype.indexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function (searchElement, fromIndex) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.indexOf called on null or undefined');\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\t\tconst fromIndexInt = fromIndex >>> 0;\n\t\tconst fromIndexAdjusted = Math.max(fromIndexInt >= 0 ? fromIndexInt : arrayLength - Math.abs(fromIndexInt), 0);\n\n\t\tfor (let index = fromIndexAdjusted; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tif (array[index] !== searchElement) continue;\n\t\t\treturn index;\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\n// Array.prototype.map\nif (!Array.prototype.map) {\n\tArray.prototype.map = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.map called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\t\tconst results = [];\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tresults[index] = callback.call(thisArg, array[index], index, array);\n\t\t}\n\n\t\treturn results;\n\t};\n}\n\n// Array.prototype.reduce\nif (!Array.prototype.reduce) {\n\tArray.prototype.reduce = function (callback, initialValue) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.map called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\t\tconst isInitialValuePresent = arguments.length === 2;\n\n\t\tlet index = 0;\n\t\tlet accumulator = undefined;\n\n\t\tif (isInitialValuePresent) {\n\t\t\taccumulator = initialValue;\n\t\t} else {\n\t\t\tlet isViableInitialValueFromArray = false;\n\n\t\t\tfor (; !isViableInitialValueFromArray && index < arrayLength; index++) {\n\t\t\t\tisViableInitialValueFromArray = Object.prototype.hasOwnProperty.call(array, index);\n\t\t\t\tif (isViableInitialValueFromArray) accumulator = array[index];\n\t\t\t}\n\n\t\t\tif (!isViableInitialValueFromArray)\n\t\t\t\tthrow new TypeError('Reduce of empty array with no initial value');\n\t\t}\n\n\t\tfor (; index < arrayLength; index++) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(array, index)) continue;\n\t\t\taccumulator = callback.call(undefined, accumulator, array[index], index, array);\n\t\t}\n\n\t\treturn accumulator;\n\t};\n}\n\n// Date.now\nif (!Date.now) {\n\tDate.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n// Function.prototype.bind\nif (!Function.prototype.bind) {\n\tFunction.prototype.bind = function (thisArg, ...args) {\n\t\tif (typeof this !== 'function')\n\t\t\tthrow new TypeError('Bind must be called on a function');\n\n\t\tconst target = this;\n\n\t\tconst BoundFunctionParent = function () { };\n\t\tBoundFunctionParent.prototype = this.prototype || BoundFunctionParent.prototype;\n\n\t\tconst boundFunction = function (...callArgs) {\n\t\t\tconst isCalledAsConstructor = this instanceof BoundFunctionParent;\n\t\t\treturn target.apply(isCalledAsConstructor ? this : thisArg, [...args, ...callArgs]);\n\t\t};\n\t\tboundFunction.prototype = new BoundFunctionParent();\n\n\t\treturn boundFunction;\n\t};\n}\n\n// Object.assign\nif (!Object.assign) {\n\tObject.assign = function (target, ...sources) {\n\t\tif (target == null)\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\n\t\tconst to = Object(target);\n\t\tconst sourcesLength = sources.length;\n\n\t\tfor (let index = 0; index < sourcesLength; index++) {\n\t\t\tconst nextSource = sources[index];\n\t\t\tfor (const nextKey in nextSource) {\n\t\t\t\tif (!Object.prototype.hasOwnProperty.call(nextSource, nextKey)) continue;\n\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t}\n\t\t}\n\n\t\treturn to;\n\t};\n}\n\n// Object.create\nif (!Object.create) {\n\tconst EmptyConstructor = function () { };\n\n\tObject.create = function (prototype = {}, properties = {}) {\n\t\tif (prototype !== Object(prototype) && prototype !== null)\n\t\t\tthrow TypeError('Object prototype may only be an Object or null');\n\n\t\tEmptyConstructor.prototype = prototype;\n\t\tconst result = new EmptyConstructor();\n\t\tObject.defineProperties(result, properties);\n\t\tresult.__proto__ = prototype;\n\n\t\treturn result;\n\t};\n}\n\n// Object.defineProperty\n// NOTE: The original legacy.js definition of Object.defineProperty wasn't\n// fancy. It silently didn't support everything and only assigned value.\n{\n\tconst isDefinePropertyWorking = function () {\n\t\ttry {\n\t\t\tObject.defineProperty({}, 'test', { get() { }, set() { } });\n\t\t\tif (document) Object.defineProperty(document.createElement('div'), 'test', { value: 0 });\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tif (!isDefinePropertyWorking()) {\n\t\tObject.defineProperty = function (obj, prop, desc) {\n\t\t\tobj[prop] = desc.get ? desc.get() : desc.value;\n\t\t};\n\t}\n}\n\n// Object.defineProperties\n// NOTE: The original legacy.js definition of Object.defineProperties wasn't\n// fancy. All it did was reuse Object.defineProperty which is also potentially\n// polyfilled.\n{\n\tconst isDefinePropertiesWorking = function () {\n\t\ttry {\n\t\t\tObject.defineProperties({}, { test: { value: 0 } });\n\t\t\tif (document) Object.defineProperties(document.createElement('div'), { test: { value: 0 } });\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tif (!isDefinePropertiesWorking()) {\n\t\tObject.defineProperties = function (obj, props) {\n\t\t\tfor (const prop in props) {\n\t\t\t\tif (!Object.hasOwnProperty.call(props, prop)) continue;\n\t\t\t\tObject.defineProperty(obj, prop, props[prop]);\n\t\t\t}\n\t\t};\n\t}\n}\n\n// Object.freeze\n// NOTE: This just adds Object.freeze presence. Nothing can be done.\nif (!Object.freeze) {\n\tObject.freeze = function (obj) {\n\t\treturn obj;\n\t};\n}\n\n// Object.keys\nif (!Object.keys) {\n\tconst hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString');\n\tconst dontEnumProps = ['__proto__', 'toString', 'toLocaleString', 'valueOf', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'constructor'];\n\tconst dontEnumPropsLength = dontEnumProps.length;\n\n\tObject.keys = function (obj) {\n\t\tif (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null))\n\t\t\tthrow new TypeError('Object.keys called on non-object');\n\n\t\tconst result = [];\n\n\t\tfor (const prop in obj) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(obj, prop)) continue;\n\t\t\tresult.push(prop);\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tfor (let index = 0; index < dontEnumPropsLength; index++) {\n\t\t\t\tif (!Object.prototype.hasOwnProperty.call(obj, dontEnumProps[index])) continue;\n\t\t\t\tresult.push(dontEnumProps[index]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\n// Promise\n// TODO: Better global attachment\nif (window && !window.Promise) {\n\tconst PENDING = {};\n\tconst FULFILLED = {};\n\tconst REJECTED = {};\n\n\tconst Promise = window.Promise = function (callback) {\n\t\tconst fulfilledHandlers = [];\n\t\tconst rejectedHandlers = [];\n\t\tlet state = PENDING;\n\t\tlet result;\n\t\tlet dispatchHandlers;\n\n\t\tconst makeResolver = (newState) => {\n\t\t\treturn function (value) {\n\t\t\t\tif (state !== PENDING) return;\n\t\t\t\tresult = value;\n\t\t\t\tstate = newState;\n\t\t\t\tdispatchHandlers = makeDispatcher((state === FULFILLED ? fulfilledHandlers : rejectedHandlers), result);\n\t\t\t\twait(dispatchHandlers);\n\t\t\t};\n\t\t};\n\n\t\tconst fulfill = makeResolver(FULFILLED);\n\t\tconst reject = makeResolver(REJECTED);\n\n\t\ttry {\n\t\t\tcallback(fulfill, reject);\n\t\t} catch (err) {\n\t\t\treject(err);\n\t\t}\n\n\t\treturn {\n\t\t\t// `then()` returns a Promise - 2.2.7\n\t\t\tthen(onFulfilled, onRejected) {\n\t\t\t\tconst promise2 = new Promise((fulfill, reject) => {\n\n\t\t\t\t\tconst processResolutionHandler = (handler, handlers, forward) => {\n\t\t\t\t\t\tif (typeof handler === 'function') {\n\t\t\t\t\t\t\thandlers.push(p1result => {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tresolve(promise2, handler(p1result), fulfill, reject);\n\t\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\thandlers.push(forward);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tprocessResolutionHandler(onFulfilled, fulfilledHandlers, fulfill);\n\t\t\t\t\tprocessResolutionHandler(onRejected, rejectedHandlers, reject);\n\n\t\t\t\t\tif (state !== PENDING) {\n\t\t\t\t\t\twait(dispatchHandlers);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t\treturn promise2;\n\t\t\t},\n\t\t\t'catch'(onRejected) {\n\t\t\t\treturn this.then(null, onRejected);\n\t\t\t}\n\t\t};\n\t};\n\n\tPromise.all = function (promises) {\n\t\treturn new Promise((fulfil, reject) => {\n\t\t\tconst result = [];\n\t\t\tlet pending;\n\t\t\tlet i;\n\n\t\t\tif (!promises.length) {\n\t\t\t\tfulfil(result);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst processPromise = (promise, i) => {\n\t\t\t\tif (promise && typeof promise.then === 'function') {\n\t\t\t\t\tpromise.then(value => {\n\t\t\t\t\t\tresult[i] = value;\n\t\t\t\t\t\t--pending || fulfil(result);\n\t\t\t\t\t}, reject);\n\t\t\t\t} else {\n\t\t\t\t\tresult[i] = promise;\n\t\t\t\t\t--pending || fulfil(result);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tpending = i = promises.length;\n\n\t\t\twhile (i--) {\n\t\t\t\tprocessPromise(promises[i], i);\n\t\t\t}\n\t\t});\n\t};\n\n\tPromise.resolve = function (value) {\n\t\treturn new Promise(fulfill => {\n\t\t\tfulfill(value);\n\t\t});\n\t};\n\n\tPromise.reject = function (reason) {\n\t\treturn new Promise((fulfill, reject) => {\n\t\t\treject(reason);\n\t\t});\n\t};\n\n\t// TODO use MutationObservers or something to simulate setImmediate\n\tconst wait = function (callback) {\n\t\tsetTimeout(callback, 0);\n\t};\n\n\tconst makeDispatcher = function (handlers, result) {\n\t\treturn function () {\n\t\t\tfor (let handler; handler = handlers.shift();) {\n\t\t\t\thandler(result);\n\t\t\t}\n\t\t};\n\t};\n\n\tconst resolve = function (promise, x, fulfil, reject) {\n\t\tlet then;\n\t\tif (x === promise) {\n\t\t\tthrow new TypeError(`A promise's fulfillment handler cannot return the same promise`);\n\t\t}\n\t\tif (x instanceof Promise) {\n\t\t\tx.then(fulfil, reject);\n\t\t} else if (x && (typeof x === 'object' || typeof x === 'function')) {\n\t\t\ttry {\n\t\t\t\tthen = x.then;\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof then === 'function') {\n\t\t\t\tlet called;\n\n\t\t\t\tconst resolvePromise = function (y) {\n\t\t\t\t\tif (called) return;\n\t\t\t\t\tcalled = true;\n\t\t\t\t\tresolve(promise, y, fulfil, reject);\n\t\t\t\t};\n\t\t\t\tconst rejectPromise = function (r) {\n\t\t\t\t\tif (called) return;\n\t\t\t\t\tcalled = true;\n\t\t\t\t\treject(r);\n\t\t\t\t};\n\n\t\t\t\ttry {\n\t\t\t\t\tthen.call(x, resolvePromise, rejectPromise);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfulfil(x);\n\t\t\t}\n\t\t} else {\n\t\t\tfulfil(x);\n\t\t}\n\t};\n\n}\n\n// String.prototype.trim\nif (!String.prototype.trim) {\n\tString.prototype.trim = function () {\n\t\treturn this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\t};\n}\n\n// Node.prototype.contains\n// NOTE: Node doesn't exist in IE8. Nothing can be done.\nif (window && window.Node && window.Node.prototype && !window.Node.prototype.contains) {\n\tNode.prototype.contains = function (node) {\n\t\tif (!node)\n\t\t\tthrow new TypeError('node required');\n\n\t\tdo {\n\t\t\tif (this === node) return true;\n\t\t} while (node = node && node.parentNode);\n\n\t\treturn false;\n\t};\n}\n\n// performance.now\n// NOTE: Setup requires Date.now() to be present already.\nif (window && window.performance && !window.performance.now) {\n\twindow.performance = window.performance || {};\n\n\tconst nowOffset = Date.now();\n\n\twindow.performance.now = function () {\n\t\treturn Date.now() - nowOffset;\n\t};\n}\n\n// requestAnimationFrame\n// cancelAnimationFrame\nif (window && !(window.requestAnimationFrame && window.cancelAnimationFrame)) {\n\tlet lastTime = 0;\n\twindow.requestAnimationFrame = function (callback) {\n\t\tconst currentTime = Date.now();\n\t\tconst timeToNextCall = Math.max(0, 16 - (currentTime - lastTime));\n\t\tconst id = window.setTimeout(() => { callback(currentTime + timeToNextCall); }, timeToNextCall);\n\t\tlastTime = currentTime + timeToNextCall;\n\t\treturn id;\n\t};\n\twindow.cancelAnimationFrame = function (id) {\n\t\tclearTimeout(id);\n\t};\n}\n\n// addEventListener\n// removeEventListener\n// https://gist.github.com/Rich-Harris/6010282 via https://gist.github.com/jonathantneal/2869388\nif (document && window && !(window.addEventListener && window.removeEventListener)) {\n\n\tconst Event = function (e, element) {\n\t\tconst instance = this;\n\n\t\tfor (const property in e) {\n\t\t\tinstance[property] = e[property];\n\t\t}\n\n\t\tinstance.currentTarget = element;\n\t\tinstance.target = e.srcElement || element;\n\t\tinstance.timeStamp = +new Date();\n\n\t\tinstance.preventDefault = function () {\n\t\t\te.returnValue = false;\n\t\t};\n\n\t\tinstance.stopPropagation = function () {\n\t\t\te.cancelBubble = true;\n\t\t};\n\t};\n\n\tconst addEventListener = function (type, listener) {\n\t\tconst element = this;\n\t\tconst listeners = element.listeners || (element.listeners = []);\n\t\tconst i = listeners.length;\n\n\t\tlisteners[i] = [listener, e => { listener.call(element, new Event(e, element)); }];\n\t\telement.attachEvent('on' + type, listeners[i][1]);\n\t};\n\n\tconst removeEventListener = function (type, listener) {\n\t\tconst element = this;\n\n\t\tif (!element.listeners) return;\n\n\t\tconst listeners = element.listeners;\n\t\tlet i = listeners.length;\n\n\t\twhile (i--) {\n\t\t\tif (listeners[i][0] !== listener) continue;\n\t\t\telement.detachEvent('on' + type, listeners[i][1]);\n\t\t}\n\t};\n\n\twindow.addEventListener = document.addEventListener = addEventListener;\n\twindow.removeEventListener = document.removeEventListener = removeEventListener;\n\n\tif ('Element' in window) {\n\t\twindow.Element.prototype.addEventListener = addEventListener;\n\t\twindow.Element.prototype.removeEventListener = removeEventListener;\n\t} else {\n\t\t// First, intercept any calls to document.createElement - this is necessary\n\t\t// because the CSS hack (see below) doesn't come into play until after a\n\t\t// node is added to the DOM, which is too late for a lot of Ractive setup work\n\t\tconst origCreateElement = document.createElement;\n\n\t\tdocument.createElement = function (tagName) {\n\t\t\tconst el = origCreateElement(tagName);\n\t\t\tel.addEventListener = addEventListener;\n\t\t\tel.removeEventListener = removeEventListener;\n\t\t\treturn el;\n\t\t};\n\n\t\t// Then, mop up any additional elements that weren't created via\n\t\t// document.createElement (i.e. with innerHTML).\n\t\tconst head = document.getElementsByTagName('head')[0];\n\t\tconst style = document.createElement('style');\n\n\t\thead.insertBefore(style, head.firstChild);\n\n\t\t//style.styleSheet.cssText = '*{-ms-event-prototype:expression(!this.addEventListener&&(this.addEventListener=addEventListener)&&(this.removeEventListener=removeEventListener))}';\n\t}\n}\n\n// window.getComputedStyle\n// https://github.com/jonathantneal/Polyfills-for-IE8/blob/master/getComputedStyle.js\nif (document && window && !window.getComputedStyle) {\n\n\tconst noop = function () { };\n\tconst borderSizes = {};\n\tconst normalProps = {\n\t\tfontWeight: 400,\n\t\tlineHeight: 1.2, // actually varies depending on font-family, but is generally close enough...\n\t\tletterSpacing: 0\n\t};\n\n\tconst getPixelSize = function (element, style, property, fontSize) {\n\t\tconst value = style[property];\n\t\tconst rawSize = parseFloat(value);\n\t\tconst rawUnit = value.split(/\\d/)[0];\n\t\tconst isMeasureNotSizeAndUnit = isNaN(rawSize) && /^thin|medium|thick$/.test(value);\n\t\tconst size = isMeasureNotSizeAndUnit ? getBorderPixelSize(value) : rawSize;\n\t\tconst unit = isMeasureNotSizeAndUnit ? '' : rawUnit;\n\n\t\tfontSize = fontSize != null ? fontSize\n\t\t\t: /%|em/.test(unit) && element.parentElement ? getPixelSize(element.parentElement, element.parentElement.currentStyle, 'fontSize', null)\n\t\t\t\t: 16;\n\n\t\tconst rootSize = property == 'fontSize' ? fontSize\n\t\t\t: /width/i.test(property) ? element.clientWidth\n\t\t\t\t: element.clientHeight;\n\n\t\treturn (unit == 'em') ? size * fontSize\n\t\t\t: (unit == 'in') ? size * 96\n\t\t\t\t: (unit == 'pt') ? size * 96 / 72\n\t\t\t\t\t: (unit == '%') ? size / 100 * rootSize\n\t\t\t\t\t\t: size;\n\t};\n\n\tconst getBorderPixelSize = function (size) {\n\n\t\t// `thin`, `medium` and `thick` vary between browsers. (Don't ever use them.)\n\t\tif (!borderSizes[size]) {\n\t\t\tconst div = document.createElement('div');\n\t\t\tdiv.style.display = 'block';\n\t\t\tdiv.style.position = 'fixed';\n\t\t\tdiv.style.width = div.style.height = '0';\n\t\t\tdiv.style.borderRight = size + ' solid black';\n\t\t\tdocument.getElementsByTagName('body')[0].appendChild(div);\n\n\t\t\tconst bcr = div.getBoundingClientRect();\n\n\t\t\tborderSizes[size] = bcr.right - bcr.left;\n\t\t}\n\n\t\treturn borderSizes[size];\n\t};\n\n\tconst setShortStyleProperty = function (style, property) {\n\t\tconst borderSuffix = property == 'border' ? 'Width' : '';\n\t\tconst t = `${property}Top${borderSuffix}`;\n\t\tconst r = `${property}Right${borderSuffix}`;\n\t\tconst b = `${property}Bottom${borderSuffix}`;\n\t\tconst l = `${property}Left${borderSuffix}`;\n\n\t\tstyle[property] = (style[t] == style[r] == style[b] == style[l] ? [style[t]]\n\t\t\t: style[t] == style[b] && style[l] == style[r] ? [style[t], style[r]]\n\t\t\t\t: style[l] == style[r] ? [style[t], style[r], style[b]]\n\t\t\t\t\t: [style[t], style[r], style[b], style[l]]).join(' ');\n\t};\n\n\tconst CSSStyleDeclaration = function (element) {\n\n\t\tconst style = this;\n\t\tconst currentStyle = element.currentStyle;\n\t\tconst fontSize = getPixelSize(element, currentStyle, 'fontSize', null);\n\n\t\t// TODO tidy this up, test it, send PR to jonathantneal!\n\t\tfor (const property in currentStyle) {\n\t\t\tif (currentStyle[property] === 'normal' && normalProps.hasOwnProperty(property)) {\n\t\t\t\tstyle[property] = normalProps[property];\n\t\t\t} else if (/width|height|margin.|padding.|border.+W/.test(property)) {\n\t\t\t\tif (currentStyle[property] === 'auto') {\n\t\t\t\t\tif (/^width|height/.test(property)) {\n\t\t\t\t\t\t// just use clientWidth/clientHeight...\n\t\t\t\t\t\tstyle[property] = (property === 'width' ? element.clientWidth : element.clientHeight) + 'px';\n\t\t\t\t\t} else if (/(?:padding)?Top|Bottom$/.test(property)) {\n\t\t\t\t\t\tstyle[property] = '0px';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstyle[property] = getPixelSize(element, currentStyle, property, fontSize) + 'px';\n\t\t\t\t}\n\t\t\t} else if (property === 'styleFloat') {\n\t\t\t\tstyle.float = currentStyle[property];\n\t\t\t} else {\n\t\t\t\tstyle[property] = currentStyle[property];\n\t\t\t}\n\t\t}\n\n\t\tsetShortStyleProperty(style, 'margin');\n\t\tsetShortStyleProperty(style, 'padding');\n\t\tsetShortStyleProperty(style, 'border');\n\n\t\tstyle.fontSize = fontSize + 'px';\n\n\t\treturn style;\n\t};\n\n\tCSSStyleDeclaration.prototype = {\n\t\tconstructor: CSSStyleDeclaration,\n\t\tgetPropertyPriority: noop,\n\t\tgetPropertyValue(prop) {\n\t\t\treturn this[prop] || '';\n\t\t},\n\t\titem: noop,\n\t\tremoveProperty: noop,\n\t\tsetProperty: noop,\n\t\tgetPropertyCSSValue: noop\n\t};\n\n\twindow.getComputedStyle = function (element) {\n\t\treturn new CSSStyleDeclaration(element);\n\t};\n}\n"],"names":["Array","isArray","arg","Object","prototype","toString","call","every","callback","thisArg","this","undefined","TypeError","let","array","arrayLength","length","index","hasOwnProperty","filter","results","push","find","forEach","indexOf","searchElement","fromIndex","fromIndexInt","fromIndexAdjusted","Math","max","abs","map","reduce","initialValue","const","isInitialValuePresent","arguments","accumulator","isViableInitialValueFromArray","Date","now","getTime","Function","bind","target","BoundFunctionParent","boundFunction","isCalledAsConstructor","apply","args","concat","callArgs","assign","to","sourcesLength","sources","nextSource","nextKey","create","EmptyConstructor","properties","result","defineProperties","__proto__","isDefinePropertyWorking","defineProperty","get","set","document","createElement","value","err","obj","prop","desc","isDefinePropertiesWorking","test","props","freeze","keys","hasDontEnumBug","propertyIsEnumerable","dontEnumProps","dontEnumPropsLength","window","Promise","PENDING","FULFILLED","REJECTED","dispatchHandlers","fulfilledHandlers","rejectedHandlers","state","makeResolver","newState","makeDispatcher","wait","fulfill","reject","then","onFulfilled","onRejected","promise2","processResolutionHandler","handler","handlers","forward","p1result","resolve","catch","all","promises","fulfil","pending","i","processPromise","promise","reason","setTimeout","shift","x","e","called","resolvePromise","y","rejectPromise","r","String","trim","replace","Node","contains","node","parentNode","performance","nowOffset","requestAnimationFrame","cancelAnimationFrame","lastTime","currentTime","timeToNextCall","id","clearTimeout","addEventListener","removeEventListener","Event","element","instance","property","currentTarget","srcElement","timeStamp","preventDefault","returnValue","stopPropagation","cancelBubble","type","listener","listeners","attachEvent","detachEvent","Element","origCreateElement","tagName","el","head","getElementsByTagName","style","insertBefore","firstChild","getComputedStyle","noop","borderSizes","normalProps","fontWeight","lineHeight","letterSpacing","getPixelSize","fontSize","rawSize","parseFloat","rawUnit","split","isMeasureNotSizeAndUnit","isNaN","size","getBorderPixelSize","unit","parentElement","currentStyle","rootSize","clientWidth","clientHeight","div","display","position","width","height","borderRight","appendChild","bcr","getBoundingClientRect","right","left","setShortStyleProperty","borderSuffix","t","b","l","join","CSSStyleDeclaration","constructor","getPropertyPriority","getPropertyValue","item","removeProperty","setProperty","getPropertyCSSValue"],"mappings":"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"}